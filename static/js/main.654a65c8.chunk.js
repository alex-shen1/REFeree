(this.webpackJsonpreferrals=this.webpackJsonpreferrals||[]).push([[0],{43:function(e,t,a){e.exports=a(69)},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},55:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(20),s=a.n(o),i=(a(48),a(9)),c=a(10),l=a(12),u=a(11),m=(a(49),a(50),a(23)),v=a(16),g=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={},n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"navpanel"},r.a.createElement(m.a,{bg:"light",expand:"lg"},r.a.createElement(m.a.Brand,{href:"#home"},"REFeree"),r.a.createElement(m.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(m.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement("div",null,r.a.createElement(v.b,{to:"/home"}," Home "),r.a.createElement(v.b,{to:"/about"},"About Us")))))}}]),a}(r.a.Component),h=(a(55),a(6)),d=a(41),f=a(25),p=a(21),E=a(22),b=a.n(E);a(59),a(61);b.a.initializeApp({apiKey:"AIzaSyAAx_KB8yB_BBO2qVEDhFKcLB1scs_Xkns",authDomain:"referee-42ffa.firebaseapp.com",databaseURL:"https://referee-42ffa.firebaseio.com",projectId:"referee-42ffa",storageBucket:"referee-42ffa.appspot.com",messagingSenderId:"527189579972",appId:"1:527189579972:web:74e964b67554da94d15191"});var y=new b.a.auth.GoogleAuthProvider,U=b.a.auth(),O=b.a.database(),j=(b.a,["10% Discount","20% Discount","30% Discount","50% Discount"]),w=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).getRefCount=function(){O.ref("userData/".concat(n.state.activeUser)).on("value",(function(e){e&&e.exists()&&n.setState({referralCount:e.val().referrals})}))},n.state={referralCount:0,nextPrizeAt:5,activeUser:n.props.activeUser},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getRefCount()}},{key:"componentDidUpdate",value:function(e){this.props.activeUser!=e.activeUser&&this.getRefCount()}},{key:"render",value:function(){return r.a.createElement("div",{className:"progressbar"},r.a.createElement(f.a,null,r.a.createElement(p.a,null,r.a.createElement(h.a,{className:"Card"},r.a.createElement(h.a.Title,{className:"Title"},"Your Progress"),r.a.createElement(h.a.Body,null,r.a.createElement("div",{className:"Milestones"},r.a.createElement("div",null,"0"),r.a.createElement("div",{style:{marginLeft:"9vw"}},"5"),r.a.createElement("div",{style:{marginLeft:"9vw"}},"10"),r.a.createElement("div",{style:{marginLeft:"9vw"}},"15"),r.a.createElement("div",{style:{marginLeft:"9vw"}},"20")),r.a.createElement(d.a,{striped:!0,now:this.state.referralCount/20*100,className:"ProgressBar",label:this.state.referralCount}),r.a.createElement("div",{className:"Milestones"},r.a.createElement("div",null,"Rewards"),r.a.createElement("div",{className:"Rewards"},j[0]),r.a.createElement("div",{className:"Rewards"},j[1]),r.a.createElement("div",{className:"Rewards"},j[2]),r.a.createElement("div",{className:"Rewards"},j[3]))))),r.a.createElement(p.a,null,r.a.createElement(h.a,{className:"Message"},r.a.createElement(h.a.Body,null,"You are ",5-this.state.referralCount%5," referrals away from the next prize!!"),r.a.createElement(h.a.Body,null,"Next Prize: ",j[Math.floor(this.state.referralCount/5)])))))}}]),a}(r.a.Component),L=(a(65),[{q:"How can I refer my friends?",a:"Click on the refer button to invite your friends using email!"},{q:"What can I redeem with my points?",a:"We offer discounts and for the extremely dedicated, even a brand new Mercedes!"}]),k=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={},n}return Object(c.a)(a,[{key:"render",value:function(){var e=L.map((function(e){return r.a.createElement("div",{style:{paddingBottom:20}},r.a.createElement(h.a.Title,{variant:"primary"},e.q),r.a.createElement(h.a.Text,{variant:"secondary"},e.a))}));return r.a.createElement("div",{className:"faq"},r.a.createElement(g,null),r.a.createElement("h1",null,"FAQs"),r.a.createElement(h.a,{style:{width:"18rem"}},r.a.createElement(h.a.Body,null,e)))}}]),a}(r.a.Component),x=(a(66),a(19)),A=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={activeUser:null},n}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(e){this.props.activeUser!=e.activeUser&&this.setState({activeUser:this.props.activeUser})}},{key:"componentDidMount",value:function(){this.setState({activeUser:this.props.activeUser}),console.log(this.props.activeUser)}},{key:"render",value:function(){return r.a.createElement("div",{className:"ref"},r.a.createElement(f.a,null,r.a.createElement(p.a,null,r.a.createElement(h.a,{style:{margin:"0 auto",width:"45vw",height:"25vh",marginTop:"3vh",marginBottom:"3vh",float:"none",marginLeft:"10vw"}},r.a.createElement(h.a.Header,null,"Your Referral Link: ","alex-shen1.github.io/REFERee/ref/".concat(this.state.activeUser)),r.a.createElement(h.a.Body,{class:"h1 text-center"},"UID LINK"))),r.a.createElement(p.a,null,r.a.createElement(h.a,{style:{margin:"0 auto",width:"16vw",height:"25vh",marginTop:"3vh",marginBottom:"3vh",float:"none"}},r.a.createElement(h.a.Header,null,"Refer a friend!"),r.a.createElement(h.a.Body,null,r.a.createElement(x.a,{variant:"light"},r.a.createElement("img",{src:"https://cdn2.hubspot.net/hubfs/521324/App-Icon-1200x1200-gmail.png",width:"40px",height:"40px"}))," "," ",r.a.createElement(x.a,{variant:"light"},r.a.createElement("img",{src:"https://pngimg.com/uploads/facebook_logos/facebook_logos_PNG19748.png",width:"40px",height:"40px"}))," "," ",r.a.createElement(x.a,{variant:"light"},r.a.createElement("img",{src:"https://lh3.googleusercontent.com/proxy/L1Qczy6X8MHlu0EOMm6NPr88KdGmpGS6ocRV0l3lqsn96R0Wz2ec6nEViQKXW-MY_KBSBxLlrooEkwEk4_EzrIA_l0oKvAxQmPplyQR11AAFzrGsCoEFqxCDQbC_sBSjZA",width:"40px",height:"40px"}))," "," ")))))}}]),a}(r.a.Component),C=a(7),I=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleLogout=function(){console.log("logging out"),e.setState({isLoggedIn:!1,activeUser:null}),U.signOut(),e.props.setActiveUser(null)},e}return Object(c.a)(a,[{key:"render",value:function(){return this.props.isLoggedIn?r.a.createElement("div",{className:"homepage"},r.a.createElement(g,null),r.a.createElement(A,{activeUser:this.props.activeUser}),r.a.createElement(w,{activeUser:this.props.activeUser}),r.a.createElement("button",{onClick:this.handleLogout},"Sign out")):r.a.createElement(C.a,{to:"/login"})}}]),a}(n.Component),B=(a(67),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).setActiveUser=function(e){n.setState({activeUser:e})},n.handleGoogleLogin=function(){U.signInWithPopup(y).then((function(e){console.log(e);var t=e.user;n.props.setActiveUser(t.uid),O.ref("userData").once("value",(function(e){if(e&&e.exists()){var a=!1;if(Object.keys(e.val()).map((function(e){t.uid===e&&(a=!0)})),!a){var r={name:t.displayName,referrals:0};O.ref("userData/".concat(t.uid)).set(r),null!=n.props.referrer&&n.creditReferrer()}}}))})).catch((function(e){return console.log(e)}))},n.creditReferrer=function(){var e=n.props.referrer,t=O.ref("userData/".concat(e));t.once("value",(function(e){if(e&&e.exists()){console.log(e.val());var a=e.val();a.referrals++,console.log(a),t.set(a)}}))},n.handleLogout=function(){console.log("logging out"),n.setState({isLoggedIn:!1,activeUser:null}),n.props.setActiveUser(null),U.signOut()},n.state={},n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"login"},this.props.isLoggedIn?r.a.createElement(C.a,{to:"/home"}):r.a.createElement("div",null,this.state.isLoggedIn?r.a.createElement(h.a,{bg:"secondary",text:"light",style:{margin:"0 auto",width:"10vw",height:"5vh",marginTop:"3vh",marginBottom:"3vh",float:"none"}},'Hello, "NAME"'):r.a.createElement(h.a,{bg:"secondary",text:"light",style:{margin:"0 auto",width:"10vw",height:"5vh",marginTop:"3vh",marginBottom:"3vh",float:"none"}},"Please sign in."),r.a.createElement("button",{onClick:this.handleLogout},"Sign out"),r.a.createElement("button",{onClick:this.handleGoogleLogin},"Sign in with Google"),r.a.createElement("button",{onClick:this.creditReferrer},"test giving points")))}}]),a}(r.a.Component)),N=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.id,r.a.createElement(B,{isLoggedIn:this.props.isLoggedIn,referrer:this.props.id,setActiveUser:this.props.setActiveUser}))}}]),a}(n.Component),R=(a(68),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).setActiveUser=function(e){return n.setState({activeUser:e,isLoggedIn:null!=e})},n.state={activeUser:null,isLoggedIn:!1,allUsers:null},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;U.onAuthStateChanged((function(t){t?(console.log(t),e.setActiveUser(t.uid)):console.log("no user")})),O.ref("userData").on("value",(function(t){t&&t.exists()&&e.setState({allUsers:Object.keys(t.val())})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"app"},r.a.createElement(v.a,{basename:"/REFERee"},r.a.createElement(C.d,null,r.a.createElement(C.b,{exact:!0,path:"/",render:function(e){return r.a.createElement(C.a,{to:"/login"})}}),r.a.createElement(C.b,{exact:!0,path:"/home",render:function(t){return r.a.createElement(I,Object.assign({},t,{activeUser:e.state.activeUser,isLoggedIn:e.state.isLoggedIn,setActiveUser:e.setActiveUser}))}}),r.a.createElement(C.b,{exact:!0,path:"/about",render:function(t){return r.a.createElement(k,Object.assign({},t,{isLoggedIn:e.state.isLoggedIn}))}}),r.a.createElement(C.b,{exact:!0,path:"/login",render:function(t){return r.a.createElement(B,Object.assign({},t,{setActiveUser:e.setActiveUser,isLoggedIn:e.state.isLoggedIn,referrer:null}))}}),this.state.allUsers?this.state.allUsers.map((function(t){return console.log("creating page for ".concat(t)),r.a.createElement(C.b,{exact:!0,path:"/ref/".concat(t),render:function(a){return r.a.createElement(N,Object.assign({},a,{isLoggedIn:e.state.isLoggedIn,id:t,setActiveUser:e.setActiveUser}))}})})):"")),r.a.createElement("button",{onClick:this.loadUserData},"Print user"))}}]),a}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[43,1,2]]]);
//# sourceMappingURL=main.654a65c8.chunk.js.map